<form id="order-form" class="form-validation" action="">
<div class="row clearfix">
<div class="col-md-12 column">
  <table id="edit-order-table" class="table table-bordered table-hover table-striped" data-height="500">
    <thead>
      <tr>
        <th></th>
        <th>Item ID</th>
        <th>Product Name</th>
        <th>Picture</th>
        <th>Product Weight</th>
        <th>Color</th>
        <th>Quantity Per Unit</th>
        <th>Item Price</th>
        <th>Unit</th>
        <th>No of Unit</th>
        <th>Volume of Unit</th>
        <th>Item Total Weight</th>
        <th>Weight Per Unit</th>
        <th>Item Total Price</th>
        <th>Item Total Volume</th>
        <th>Remarks</th>
        <th>Actions</th>
      </tr>
    </thead>    
    <tbody>
        <% unless @orderitems.nil? %>
      <% @orderitems.each_with_index do |orderitem, index| %>
        <%= render 'order_items/order_item',orderitem: orderitem,index: index %>
      <% end %>
      <% end %>
    </tbody>
  </table>
</div>
<input type="hidden" name="authenticity_token" value="<%= form_authenticity_token %>"/>
<input type="hidden" name="order_total_weight" id="order_total_weight" value="<%= @order.total_weight %>"/>
<input type="hidden" name="order_total_volume" id="order_total_volume" value="<%= @order.total_volume %>"/>
<input type="hidden" name="order_total_price" id="order_total_price" value="<%= @order.total_price %>"/>
</div>
</form>
<input type="hidden" id="order-id" value="<%= @order.id %>">
<div class="bs-example">
    <!-- Modal HTML -->
    <div id="myModal" class="modal fade">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h4 class="modal-title">Upload File</h4>
                </div>
                <div class="modal-body">
                  <%= form_for @order, :url => {:id => @order.id, :action => "upload_pic"}, :method => :post, :id => "upload-form", :remote => true do |f| %>
                    <div class="field">
                      <%= f.file_field :picture %>
                      <%= hidden_field_tag 'order_item_id', '',class: "order_item_id"  %>
                    </div>
                    <div class="actions">
                      <%= f.submit "upload" , class: 'btn btn-primary btn-sm'%>
                    </div>
                  <% end %>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary">Save changes</button>
                </div>
            </div>
        </div>
    </div>
</div>
<nav class="navbar navbar-default navbar-fixed-bottom" style="min-height:20px;">
  <div class="container-fluid">
    <div style="white-space: nowrap">
          <%= link_to "Add Row",  order_order_items_path(@order.id), class: "btn btn-default pull-left",method: :post, remote: true %>
          <a id='delete_row' class="pull-left btn btn-default">Delete Row</a>
          <form class="navbar-form navbar-left" style="margin: 0">
            <a class="btn btn-default pull-left moverow">Move Row After</a>
	        <div class="form-group">
    	      <input id='rowno' type='text' placeholder='rowno' style="width: 60px" class='form-control input-md' />
	        </div>	        
	      </form>
          <a id='save_order' data-rc-url="<%= order_path(@order.id) %>" class="navbar-right btn btn-info">Save</a>
          <a id='save_order_invisible' data-rc-url="<%= order_path(@order.id) %>" class="pull-right btn btn-info" style="display: none;">#</a>
          <p class="navbar-text navbar-right small" style="margin: 5px">Total Price: <span class="badge alert-info order_total_price"><%= @order.total_price.nil? ? "&nbsp;&nbsp;".html_safe : @order.total_price %></span></p>
          <p class="navbar-text navbar-right small" style="margin: 5px">Total Weight: <span class="badge alert-info order_total_weight"><%= @order.total_weight.nil? ? "&nbsp;&nbsp;".html_safe : @order.total_weight %></span></p>
          <p class="navbar-text navbar-right small" style="margin: 5px">Total Volume: <span class="badge alert-info order_total_volume"><%= @order.total_volume.nil? ? "&nbsp;&nbsp;".html_safe : @order.total_volume %></span></p>
    </div>
  </div>
</nav>
