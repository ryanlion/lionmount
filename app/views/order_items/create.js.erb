<% if @orderitem.id.nil? %>
  alert('The row could not be added! ');
<% else %>
  <% if @rowno.nil? %>
    $('#edit-order-table > tbody').append("<%= j (render 'order_item',orderitem: @orderitem) %>");
  <% else %>
    $('#edit-order-table > tbody').append("<%= j (render 'order_item',orderitem: @orderitem) %>");
    var rowno = '<%= @rowno %>';
    var rownoInt = parseInt(rowno);
    var rowtomove=$('#edit-order-table tr:eq('+ rownoInt +')');
    var row = $('#edit-order-table  tbody tr:last');
    row.insertAfter(rowtomove);
  <% end %>
  $('.sorting').each(function(index) {
      $(this).val(index+1);
      $(this).closest('tr').find('.sorting_text').html(index+1);
    });
  $("#save_order_invisible").click();
  $('td').addClass( "nopadding" );
  $('.parsley-errors-list').addClass( "nopadding" );
<% end %>
