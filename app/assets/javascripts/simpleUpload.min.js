!function($){$.fn.simpleUpload=function(options){var def={url:null,change:null,error:null,types:null,fields:null,size:5120};return this.each(function(){function send(){var a=$this.attr("name"),b=new FormData;for(var c in $this[0].files)if("object"==typeof $this[0].files[c]){var d=$this[0].files[c];if(!typeCheck(d.name))return"function"==typeof params.error&&params.error({type:"fileType"}),!1;if(d.size/params.size>params.size)return"function"==typeof params.error&&params.error({type:"size"}),!1;b.append(a+"["+c+"]",d)}if("object"==typeof params.fields)for(var c in params.fields)if($.isArray(params.fields[c]))for(var e in params.fields[c])b.append(c+"["+e+"]",params.fields[c][e]);else b.append(c,params.fields[c]);var f={url:params.url,data:b,cache:!1,contentType:!1,processData:!1,type:"POST",complete:function(){$this.val(""),params.complete&&params.complete(arguments)}};null!=params.error&&(f.error=params.error),params.success&&(f.success=params.success),params.async&&(f.async=params.async),params.beforeSend&&(f.beforeSend=params.beforeSend),params.global&&(f.global=params.global),params.dataType&&(f.dataType=params.dataType),params.contents&&(f.contents=params.contents),params.jsonp&&(f.jsonp=params.jsonp),params.jsonpCallback&&(f.jsonpCallback=params.jsonpCallback),params.password&&(f.password=params.password),params.username&&(f.username=params.username),params.statusCode&&(f.statusCode=params.statusCode),$.ajax(f)}function typeCheck(a){return $.isArray(params.types)?params.types.indexOf($.getExt(a))>-1?!0:!1:!0}var $this=$(this);options||(options={}),$.each(this.attributes,function(){if(this.specified&&this.name.indexOf("data-")>-1){var name=this.name.replace("data-","");options[name]="function"==typeof window[this.value]?eval(this.value):this.value}});var params=$.extend({},def,options);"function"==typeof params.change&&$this.change(function(){params.change($this[0].files)}),params.trigger?$(params.trigger).click(send):$this.change(send)})},$.extend(!0,{getExt:function(a){return a.substr(a.lastIndexOf(".")+1)}})}(jQuery);